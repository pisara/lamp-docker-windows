# lamp-docker-windows

当リポジトリのファイルはDocker for Windows上でLAMP環境を構築するためのお手軽支援キットです。

Docker環境を配置するフォルダにこれらのファイルを展開して、同根のバッチを実行するだけでLAMP環境をDocker上に展開します。

## 初回ビルド

リポジトリ内にあるdocker_buildup.batというバッチを管理者権限で実行します。

当ファイルを右クリックして。「管理者として実行」を選択クリックしてください、

## ビルド後のコンテナ起動

docker_up.batのショートカットをデスクトップなど、わかりやすいところに置いておくと便利です。

このバッチを実行することで、ビルド済みのコンテナをdocker-composeで起動します。

## 構築する環境とざっくりとした使い方

### WEBゲートウェイサーバー

https-portal様のプロジェクトを利用させていただいております。

mylamp.mynetworkにアクセスすると、PHPコンテナにフォワードされます。

SSLの解決はWEBゲートウェイサーバーがやってくれますので、PHPサーバーにHTTPSのアクセスが来ることはありません。

### PHPサーバー

CentOS7系のイメージをベースとして、PHP7.5系をRemiリポジトリからインストールします。

MailHogを活用するためPHPのSendmailのパス設定をMailHogサーバーに向くように構築しています。

なお、PHPフレームワークなどでデータベースの設定をする際は以下のように設定します。
- ホスト：mysql
- ポート：3306
- ユーザー：user
- パスワード：pass
- データベース：myapp
- 文字コード：utf8

### MySQLサーバー

MySQL8系のイメージからビルドします。

ホストからこのコンテナのMySQLにアクセスする際は、以下のようにクライアントアプリを設定します。

- ホスト：127.0.0.1
- ポート：13306
- ユーザー：user
- パスワード：pass

### MailHogサーバー

MailHog様のプロジェクトを利用させていただいております。

MailHogが展開されます。

httpでmylamp.mynetwork:8025にアクセスすると、PHPサーバーが発信したメールの一覧を見ることができます。

## PHPMyAdminサーバー

PHPMyAdminが展開されます。

httpでmylamp.mynetwork:10081にアクセスすると、PHPMyAdminを利用できます。
